var e=Object.defineProperty,s=(s,a,t)=>((s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t)(s,"symbol"!=typeof a?a+"":a,t);import{r as a,a as t}from"./vendor-VIAh7PwP.js";import{D as r,A as n,F as i,S as l,M as o,a as c,C as d,X as m,b as u,R as x,c as h,d as g,P as b,e as p,f,T as y,Z as j,g as N,h as v,U as w,H as E}from"./icons-41g8cAaQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var C={exports:{}},S={},D=a,P=Symbol.for("react.element"),k=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,A=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function O(e,s,a){var t,r={},n=null,i=null;for(t in void 0!==a&&(n=""+a),void 0!==s.key&&(n=""+s.key),void 0!==s.ref&&(i=s.ref),s)I.call(s,t)&&!R.hasOwnProperty(t)&&(r[t]=s[t]);if(e&&e.defaultProps)for(t in s=e.defaultProps)void 0===r[t]&&(r[t]=s[t]);return{$$typeof:P,type:e,key:n,ref:i,props:r,_owner:A.current}}S.Fragment=k,S.jsx=O,S.jsxs=O,C.exports=S;var F,L=C.exports,M=t;F=M.createRoot,M.hydrateRoot;const B={database:{firebird:{host:"localhost",database:"C:\\Users\\Comunidad Decidida\\Desktop\\Base\\SAE80EMPRE01\\SAE90EMPRE01.FDB",user:"SYSDBA",password:"masterkey",port:"3050"},mysql:{host:"comunidad-decidida-2.cfesoyykm6x4.us-west-2.rds.amazonaws.com",port:"3306",database:"ComunidadDecidida",user:"admin",password:"Peaky*50"}},paths:{sourceDbPath:"Z:\\Sistemas Aspel\\SAE9.00\\Empresa01\\Datos\\SAE90EMPRE01.FDB",localDbPath:"C:\\Users\\Comunidad Decidida\\Desktop\\Base\\SAE80EMPRE01\\SAE90EMPRE01.FDB",outputPath:"C:\\Users\\Comunidad Decidida\\Desktop\\INFORMACION_BD\\"},process:{vigenciaDia:9,diasFacturas:5,palabrasExcluidas:["FONDO DE RESERVA","FONDO","INSCRIP","INSCRIPCIÓN","ADELANTO","TARJETA","TARJE","ACCESO","TAG","APP"],palabrasConvenio:["CONVENIO"],palabrasCicloEscolar:["CICLO ESCOLAR"],vigenciaConvenio:90,vigenciaCicloEscolar:365,scheduledExecution:{enabled:!1,times:["09:00"],days:["monday","tuesday","wednesday","thursday","friday"],lastExecution:null}},lastUpdated:(new Date).toISOString()};const q=new class{constructor(){s(this,"configPath"),s(this,"isElectron"),this.isElectron="undefined"!=typeof window&&void 0!==window.electronAPI,this.configPath=this.isElectron?"vigencias-config.json":"vigencias-config-web.json"}async loadConfig(){var e;try{if(this.isElectron&&(null==(e=window.electronAPI)?void 0:e.readConfig)){const e=await window.electronAPI.readConfig();return e?{...B,...e}:B}{const e=localStorage.getItem("vigencias-management-config");if(e){const s=JSON.parse(e);return{...B,...s}}}}catch(s){}return B}async saveConfig(e){var s;try{const a={...e,lastUpdated:(new Date).toISOString()};this.isElectron&&(null==(s=window.electronAPI)?void 0:s.saveConfig)?await window.electronAPI.saveConfig(a):localStorage.setItem("vigencias-management-config",JSON.stringify(a))}catch(a){throw a}}async resetConfig(){const e={...B,lastUpdated:(new Date).toISOString()};return await this.saveConfig(e),e}};const U=new class{constructor(){s(this,"isElectron"),this.isElectron="undefined"!=typeof window&&void 0!==window.electronAPI}async testFirebirdConnection(e){var s;try{if(this.isElectron&&(null==(s=window.electronAPI)?void 0:s.connectFirebird)){const s=await window.electronAPI.connectFirebird(e);return s.success||!0===s}return!1}catch(a){return!1}}async testMySQLConnection(e){var s;try{if(this.isElectron&&(null==(s=window.electronAPI)?void 0:s.connectMySQL)){const s=await window.electronAPI.connectMySQL(e);return s.success||!0===s}return!1}catch(a){return!1}}async copyDatabase(e,s){var a;try{if(this.isElectron&&(null==(a=window.electronAPI)?void 0:a.copyDatabase)){const a=await window.electronAPI.copyDatabase(e,s);return"boolean"==typeof a?a:"object"==typeof a&&null!==a&&a.success||!1}return!1}catch(t){return!1}}async processFacturas(e,s,a){var t;try{return this.isElectron&&(null==(t=window.electronAPI)?void 0:t.processFacturas)?await window.electronAPI.processFacturas(e,s,a):{success:!1,message:"Procesamiento de facturas no disponible en modo web",facturasProcessed:0,vigenciasUpdated:0,errors:["Funcionalidad no disponible en modo web"]}}catch(r){return{success:!1,message:`Error procesando facturas: ${r.message}`,facturasProcessed:0,vigenciasUpdated:0,errors:[r.message]}}}};const $=new class{constructor(){s(this,"intervalId",null),s(this,"isElectron"),this.isElectron="undefined"!=typeof window&&void 0!==window.electronAPI}startScheduler(e,s){this.stopScheduler(),e.scheduledExecution.enabled&&(this.intervalId=setInterval(()=>{this.checkAndExecute(e,s)},6e4))}stopScheduler(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async checkAndExecute(e,s){var a;const t=new Date,r=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`,n=this.getDayName(t.getDay());if(e.scheduledExecution.times.includes(r)&&e.scheduledExecution.days.includes(n)){const r=e.scheduledExecution.lastExecution,n=t.toISOString().substring(0,13);if(!r||!r.startsWith(n))try{await s(),e.scheduledExecution.lastExecution=t.toISOString(),this.isElectron&&(null==(a=window.electronAPI)?void 0:a.saveConfig)&&await window.electronAPI.saveConfig({database:null,paths:null,process:e,lastUpdated:(new Date).toISOString()})}catch(i){}}}getDayName(e){return["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e]}getNextExecution(e){if(!e.scheduledExecution.enabled)return null;const s=new Date;for(let a=0;a<7;a++)for(const t of e.scheduledExecution.times){const[r,n]=t.split(":").map(Number),i=new Date(s);i.setDate(s.getDate()+a),i.setHours(r,n,0,0);const l=this.getDayName(i.getDay());if(e.scheduledExecution.days.includes(l)&&i>s)return i}return null}formatNextExecution(e){const s=this.getNextExecution(e);return s?s.toLocaleString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No programado"}},_=()=>{const[e,s]=a.useState("dashboard"),[t]=a.useState("undefined"!=typeof window&&void 0!==window.electronAPI),[C,S]=a.useState({firebird:{host:"localhost",database:"C:\\Users\\Comunidad Decidida\\Desktop\\Base\\SAE80EMPRE01\\SAE90EMPRE01.FDB",user:"SYSDBA",password:"masterkey",port:"3050"},mysql:{host:"comunidad-decidida-2.cfesoyykm6x4.us-west-2.rds.amazonaws.com",port:"3306",database:"ComunidadDecidida",user:"admin",password:"Peaky*50"}}),[D,P]=a.useState({sourceDbPath:"Z:\\Sistemas Aspel\\SAE9.00\\Empresa01\\Datos\\SAE90EMPRE01.FDB",localDbPath:"C:\\Users\\Comunidad Decidida\\Desktop\\Base\\SAE80EMPRE01\\SAE90EMPRE01.FDB",outputPath:"C:\\Users\\Comunidad Decidida\\Desktop\\INFORMACION_BD\\"}),[k,I]=a.useState({vigenciaDia:9,diasFacturas:5,palabrasExcluidas:["FONDO DE RESERVA","FONDO","INSCRIP","INSCRIPCIÓN","ADELANTO","TARJETA","TARJE","ACCESO","TAG","APP"],palabrasConvenio:["CONVENIO"],palabrasCicloEscolar:["CICLO ESCOLAR"],vigenciaConvenio:90,vigenciaCicloEscolar:365,scheduledExecution:{enabled:!1,time:"09:00",days:["monday","tuesday","wednesday","thursday","friday"],lastExecution:null}}),[A,R]=a.useState({isRunning:!1,currentStep:"",progress:0,lastRun:null}),[O,F]=a.useState([]),[M,B]=a.useState({firebird:!1,mysql:!1,testing:!1});a.useEffect(()=>{_()},[]),a.useEffect(()=>(k.scheduledExecution.enabled?$.startScheduler(k,Q):$.stopScheduler(),()=>$.stopScheduler()),[k.scheduledExecution]);const _=async()=>{try{const e=await q.loadConfig();e&&(S(e.database),P(e.paths),I(e.process),V("Sistema","Configuración cargada exitosamente","success"))}catch(e){V("Sistema",`Error cargando configuración: ${e.message}`,"error")}},T=async()=>{try{await q.saveConfig({database:C,paths:D,process:k,lastUpdated:(new Date).toISOString()}),V("Sistema","Configuración guardada exitosamente","success")}catch(e){V("Sistema",`Error guardando configuración: ${e.message}`,"error")}},V=(e,s,a)=>{const t={id:Date.now().toString(),timestamp:(new Date).toLocaleString(),process:e,message:s,status:a};F(e=>[t,...e.slice(0,99)])},G=async()=>{B(e=>({...e,testing:!0})),V("Conexiones","Iniciando prueba de conexiones...","info");try{V("Conexiones",`Probando Firebird: ${C.firebird.host}:${C.firebird.port}`,"info");const e=await U.testFirebirdConnection(C.firebird);V("Conexiones",`Probando MySQL: ${C.mysql.host}:${C.mysql.port}`,"info");const s=await U.testMySQLConnection(C.mysql);B({firebird:e,mysql:s,testing:!1});const a=s?"✅ Conectado":"❌ Error de conexión";V("Conexiones",`Firebird: ${e?"✅ Conectado":"❌ Error de conexión"}`,e?"success":"error"),V("Conexiones",`MySQL: ${a}`,s?"success":"error");V("Conexiones",`Prueba completada - Firebird: ${e?"OK":"Error"}, MySQL: ${s?"OK":"Error"}`,e&&s?"success":e||s?"warning":"error")}catch(e){B(e=>({...e,testing:!1})),V("Conexiones",`Error crítico probando conexiones: ${e.message}`,"error")}},Q=async()=>{if(!A.isRunning){R({isRunning:!0,currentStep:"Iniciando proceso...",progress:0,lastRun:null}),V("Proceso","Iniciando procesamiento de facturas","info");try{R(e=>({...e,currentStep:"Copiando base de datos...",progress:20})),V("Proceso","Copiando base de datos desde origen","info");if(!(await U.copyDatabase(D.sourceDbPath,D.localDbPath)))throw new Error("Error copiando base de datos");R(e=>({...e,currentStep:"Procesando facturas...",progress:50})),V("Proceso","Procesando facturas y calculando vigencias","info");const e=await U.processFacturas(k,D,C);if(!e.success)throw new Error(e.message);R(e=>({...e,currentStep:"Finalizando...",progress:90}));const s=`Proceso completado: ${e.facturasProcessed} facturas procesadas, ${e.vigenciasUpdated} vigencias actualizadas`;R({isRunning:!1,currentStep:"Completado",progress:100,lastRun:(new Date).toLocaleString()}),V("Proceso",s,"success"),e.errors.length>0&&e.errors.forEach(e=>{V("Proceso",`Advertencia: ${e}`,"warning")})}catch(e){R({isRunning:!1,currentStep:"Error",progress:0,lastRun:(new Date).toLocaleString()}),V("Proceso",`Error en procesamiento: ${e.message}`,"error")}}},H=async e=>{var s;if(t&&(null==(s=window.electronAPI)?void 0:s.selectFile))try{let s=null;s="output"===e?await window.electronAPI.selectDirectory():await window.electronAPI.selectFile({title:"Seleccionar archivo de base de datos",filters:[{name:"Firebird Database",extensions:["fdb","FDB"]},{name:"All Files",extensions:["*"]}]}),s&&P(a=>({...a,["sourceDb"===e?"sourceDbPath":"localDb"===e?"localDbPath":"outputPath"]:s}))}catch(a){V("Sistema",`Error seleccionando archivo: ${a.message}`,"error")}else V("Sistema","Función de navegación solo disponible en aplicación de escritorio","warning")};return L.jsxs("div",{className:"min-h-screen bg-gray-100",children:[L.jsx("header",{className:"bg-white shadow-sm border-b",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsxs("div",{className:"flex justify-between items-center py-4",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("img",{src:"/assets/logo1.png",alt:"Logo",className:"w-10 h-10 mr-3 object-contain",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="block"}}),L.jsx(r,{className:"w-8 h-8 text-blue-600 mr-3 hidden"}),L.jsxs("div",{children:[L.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interface de Gestión para Vigencias"}),L.jsx("p",{className:"text-sm text-gray-600",children:t?"Aplicación de Escritorio":"Aplicación Web"})]})]}),L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsx("div",{className:"w-3 h-3 rounded-full "+(A.isRunning?"bg-yellow-500 animate-pulse":"bg-green-500")}),L.jsx("span",{className:"text-sm text-gray-600",children:A.isRunning?"Procesando":"Listo"})]})]})})}),L.jsx("nav",{className:"bg-white shadow-sm",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:L.jsx("div",{className:"flex space-x-8",children:[{id:"dashboard",label:"Dashboard",icon:n},{id:"database",label:"Base de Datos",icon:r},{id:"paths",label:"Rutas",icon:i},{id:"parameters",label:"Parámetros",icon:l},{id:"monitor",label:"Monitor",icon:o},{id:"logs",label:"Logs",icon:c}].map(a=>{const t=a.icon;return L.jsxs("button",{onClick:()=>s(a.id),className:"flex items-center px-3 py-4 text-sm font-medium border-b-2 transition-colors "+(e===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[L.jsx(t,{className:"w-4 h-4 mr-2"}),a.label]},a.id)})})})}),L.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(()=>{switch(e){case"dashboard":return L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(n,{className:"w-5 h-5 mr-2 text-blue-600"}),"Estado del Sistema"]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("div",{className:"w-3 h-3 rounded-full "+(M.firebird?"bg-green-500":"bg-red-500")}),L.jsxs("span",{children:["Firebird: ",M.firebird?"Conectado":"Desconectado"]})]}),L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("div",{className:"w-3 h-3 rounded-full "+(M.mysql?"bg-green-500":"bg-red-500")}),L.jsxs("span",{children:["MySQL: ",M.mysql?"Conectado":"Desconectado"]})]}),L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("div",{className:"w-3 h-3 rounded-full "+(A.isRunning?"bg-yellow-500":"bg-green-500")}),L.jsxs("span",{children:["Proceso: ",A.isRunning?"Ejecutándose":"Listo"]})]})]}),L.jsxs("div",{className:"mt-4 flex space-x-3",children:[L.jsxs("button",{onClick:G,disabled:M.testing,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[L.jsx(y,{className:"w-4 h-4 mr-2"}),M.testing?"Probando...":"Probar Conexiones"]}),L.jsxs("button",{onClick:T,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",children:[L.jsx(p,{className:"w-4 h-4 mr-2"}),"Guardar Configuración"]})]})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(j,{className:"w-5 h-5 mr-2 text-orange-600"}),"Control de Proceso"]}),A.isRunning&&L.jsxs("div",{className:"mb-4",children:[L.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[L.jsx("span",{children:A.currentStep}),L.jsxs("span",{children:[A.progress,"%"]})]}),L.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:L.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.progress}%`}})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Última Ejecución"}),L.jsx("p",{className:"text-sm text-gray-600",children:A.lastRun||"Nunca"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Próxima Ejecución Programada"}),L.jsx("p",{className:"text-sm text-gray-600",children:$.formatNextExecution(k)})]})]}),L.jsx("button",{onClick:Q,disabled:A.isRunning,className:"w-full px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-lg font-medium",children:A.isRunning?L.jsxs(L.Fragment,{children:[L.jsx(x,{className:"w-5 h-5 mr-2 animate-spin"}),"Procesando..."]}):L.jsxs(L.Fragment,{children:[L.jsx(N,{className:"w-5 h-5 mr-2"}),"Iniciar Proceso"]})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[L.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(v,{className:"w-8 h-8 text-blue-600"}),L.jsxs("div",{className:"ml-3",children:[L.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Día Vigencia"}),L.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:k.vigenciaDia})]})]})}),L.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(h,{className:"w-8 h-8 text-green-600"}),L.jsxs("div",{className:"ml-3",children:[L.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Días Facturas"}),L.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:k.diasFacturas})]})]})}),L.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(w,{className:"w-8 h-8 text-purple-600"}),L.jsxs("div",{className:"ml-3",children:[L.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Convenio"}),L.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[k.vigenciaConvenio,"d"]})]})]})}),L.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:L.jsxs("div",{className:"flex items-center",children:[L.jsx(E,{className:"w-8 h-8 text-red-600"}),L.jsxs("div",{className:"ml-3",children:[L.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ciclo Escolar"}),L.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[k.vigenciaCicloEscolar,"d"]})]})]})})]})]});case"database":return L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(f,{className:"w-5 h-5 mr-2 text-orange-600"}),"Configuración Firebird (SAE Local)"]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),L.jsx("input",{type:"text",value:C.firebird.host,onChange:e=>S(s=>({...s,firebird:{...s.firebird,host:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"localhost"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puerto"}),L.jsx("input",{type:"text",value:C.firebird.port,onChange:e=>S(s=>({...s,firebird:{...s.firebird,port:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"3050"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario"}),L.jsx("input",{type:"text",value:C.firebird.user,onChange:e=>S(s=>({...s,firebird:{...s.firebird,user:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SYSDBA"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),L.jsx("input",{type:"password",value:C.firebird.password,onChange:e=>S(s=>({...s,firebird:{...s.firebird,password:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"masterkey"})]}),L.jsxs("div",{className:"md:col-span-2",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ruta de Base de Datos"}),L.jsx("input",{type:"text",value:C.firebird.database,onChange:e=>S(s=>({...s,firebird:{...s.firebird,database:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"C:\\path\\to\\database.fdb"})]})]})]}),L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(r,{className:"w-5 h-5 mr-2 text-blue-600"}),"Configuración MySQL (Base Remota)"]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),L.jsx("input",{type:"text",value:C.mysql.host,onChange:e=>S(s=>({...s,mysql:{...s.mysql,host:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"mysql.example.com"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puerto"}),L.jsx("input",{type:"text",value:C.mysql.port,onChange:e=>S(s=>({...s,mysql:{...s.mysql,port:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"3306"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base de Datos"}),L.jsx("input",{type:"text",value:C.mysql.database,onChange:e=>S(s=>({...s,mysql:{...s.mysql,database:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"database_name"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario"}),L.jsx("input",{type:"text",value:C.mysql.user,onChange:e=>S(s=>({...s,mysql:{...s.mysql,user:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin"})]}),L.jsxs("div",{className:"md:col-span-2",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),L.jsx("input",{type:"password",value:C.mysql.password,onChange:e=>S(s=>({...s,mysql:{...s.mysql,password:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"password"})]})]})]}),L.jsx("div",{className:"flex justify-end",children:L.jsxs("button",{onClick:T,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[L.jsx(p,{className:"w-4 h-4 mr-2"}),"Guardar Configuración de Base de Datos"]})})]});case"paths":return L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(i,{className:"w-5 h-5 mr-2 text-green-600"}),"Configuración de Rutas"]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ruta de Base de Datos de Origen (Red)"}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("input",{type:"text",value:D.sourceDbPath,onChange:e=>P(s=>({...s,sourceDbPath:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Z:\\Sistemas Aspel\\SAE9.00\\Empresa01\\Datos\\SAE90EMPRE01.FDB"}),L.jsxs("button",{onClick:()=>H("sourceDb"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center",children:[L.jsx(i,{className:"w-4 h-4 mr-1"}),"Navegar"]})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ruta de Base de Datos Local"}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("input",{type:"text",value:D.localDbPath,onChange:e=>P(s=>({...s,localDbPath:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"C:\\Users\\Usuario\\Desktop\\Base\\SAE90EMPRE01.FDB"}),L.jsxs("button",{onClick:()=>H("localDb"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center",children:[L.jsx(i,{className:"w-4 h-4 mr-1"}),"Navegar"]})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Directorio de Salida"}),L.jsxs("div",{className:"flex space-x-2",children:[L.jsx("input",{type:"text",value:D.outputPath,onChange:e=>P(s=>({...s,outputPath:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"C:\\Users\\Usuario\\Desktop\\INFORMACION_BD\\"}),L.jsxs("button",{onClick:()=>H("output"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center",children:[L.jsx(i,{className:"w-4 h-4 mr-1"}),"Navegar"]})]})]})]}),L.jsx("div",{className:"mt-6 flex justify-end",children:L.jsxs("button",{onClick:T,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[L.jsx(p,{className:"w-4 h-4 mr-2"}),"Guardar Configuración de Rutas"]})})]})});case"parameters":return L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(l,{className:"w-5 h-5 mr-2 text-purple-600"}),"Parámetros de Proceso"]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Día para Generar Vigencias"}),L.jsx("select",{value:k.vigenciaDia,onChange:e=>I(s=>({...s,vigenciaDia:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:28},(e,s)=>s+1).map(e=>L.jsxs("option",{value:e,children:["Día ",e]},e))})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Días de Facturas a Procesar"}),L.jsx("input",{type:"number",min:"1",max:"30",value:k.diasFacturas,onChange:e=>I(s=>({...s,diasFacturas:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vigencia CONVENIO (días)"}),L.jsx("input",{type:"number",min:"1",value:k.vigenciaConvenio,onChange:e=>I(s=>({...s,vigenciaConvenio:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vigencia CICLO ESCOLAR (días)"}),L.jsx("input",{type:"number",min:"1",value:k.vigenciaCicloEscolar,onChange:e=>I(s=>({...s,vigenciaCicloEscolar:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),L.jsxs("div",{className:"mt-6",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palabras Excluidas (separadas por comas)"}),L.jsx("textarea",{value:k.palabrasExcluidas.join(", "),onChange:e=>I(s=>({...s,palabrasExcluidas:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"FONDO DE RESERVA, FONDO, INSCRIP, INSCRIPCIÓN"})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palabras CONVENIO (separadas por comas)"}),L.jsx("textarea",{value:k.palabrasConvenio.join(", "),onChange:e=>I(s=>({...s,palabrasConvenio:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"CONVENIO"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palabras CICLO ESCOLAR (separadas por comas)"}),L.jsx("textarea",{value:k.palabrasCicloEscolar.join(", "),onChange:e=>I(s=>({...s,palabrasCicloEscolar:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"CICLO ESCOLAR"})]})]}),L.jsxs("div",{className:"mt-8 border-t pt-6",children:[L.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[L.jsx(h,{className:"w-5 h-5 mr-2 text-blue-600"}),"Ejecución Programada"]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:"scheduledEnabled",checked:k.scheduledExecution.enabled,onChange:e=>I(s=>({...s,scheduledExecution:{...s.scheduledExecution,enabled:e.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),L.jsx("label",{htmlFor:"scheduledEnabled",className:"ml-2 block text-sm text-gray-900",children:"Habilitar ejecución automática programada"})]}),k.scheduledExecution.enabled&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horarios de Ejecución"}),L.jsxs("div",{className:"space-y-2",children:[k.scheduledExecution.times.map((e,s)=>L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("input",{type:"time",value:e,onChange:e=>{const a=[...k.scheduledExecution.times];a[s]=e.target.value,I(e=>({...e,scheduledExecution:{...e.scheduledExecution,times:a}}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.scheduledExecution.times.length>1&&L.jsx("button",{type:"button",onClick:()=>{const e=k.scheduledExecution.times.filter((e,a)=>a!==s);I(s=>({...s,scheduledExecution:{...s.scheduledExecution,times:e}}))},className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:L.jsx(g,{className:"w-4 h-4"})})]},s)),L.jsxs("button",{type:"button",onClick:()=>{const e=[...k.scheduledExecution.times,"09:00"];I(s=>({...s,scheduledExecution:{...s.scheduledExecution,times:e}}))},className:"flex items-center px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-md text-sm",children:[L.jsx(b,{className:"w-4 h-4 mr-1"}),"Agregar Horario"]})]})]})}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días de la Semana"}),L.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}].map(e=>L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{type:"checkbox",id:e.key,checked:k.scheduledExecution.days.includes(e.key),onChange:s=>{const a=s.target.checked?[...k.scheduledExecution.days,e.key]:k.scheduledExecution.days.filter(s=>s!==e.key);I(e=>({...e,scheduledExecution:{...e.scheduledExecution,days:a}}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),L.jsx("label",{htmlFor:e.key,className:"ml-2 block text-sm text-gray-900",children:e.label})]},e.key))})]})]})]})]}),L.jsx("div",{className:"mt-6 flex justify-end",children:L.jsxs("button",{onClick:T,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[L.jsx(p,{className:"w-4 h-4 mr-2"}),"Guardar Configuración de Parámetros"]})})]})});case"monitor":return L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[L.jsx(o,{className:"w-5 h-5 mr-2 text-green-600"}),"Monitor de Proceso"]}),A.isRunning?L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("span",{className:"text-lg font-medium",children:A.currentStep}),L.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[A.progress,"%"]})]}),L.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:L.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-4 rounded-full transition-all duration-500 flex items-center justify-center",style:{width:`${A.progress}%`},children:A.progress>10&&L.jsxs("span",{className:"text-white text-xs font-medium",children:[A.progress,"%"]})})}),L.jsxs("div",{className:"flex items-center justify-center mt-4",children:[L.jsx(x,{className:"w-8 h-8 text-blue-600 animate-spin mr-3"}),L.jsx("span",{className:"text-lg text-gray-700",children:"Procesando..."})]})]}):L.jsxs("div",{className:"text-center py-8",children:[L.jsx(d,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),L.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sistema Listo"}),L.jsx("p",{className:"text-gray-600",children:"No hay procesos ejecutándose actualmente"}),A.lastRun&&L.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Última ejecución: ",A.lastRun]})]})]})});case"logs":return L.jsx("div",{className:"space-y-6",children:L.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[L.jsx(c,{className:"w-5 h-5 mr-2 text-gray-600"}),"Registro de Actividades"]}),L.jsx("button",{onClick:()=>F([]),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Limpiar Logs"})]}),L.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===O.length?L.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay registros de actividad"}):O.map(e=>L.jsx("div",{className:"p-3 rounded-md border-l-4 "+("success"===e.status?"bg-green-50 border-green-400":"error"===e.status?"bg-red-50 border-red-400":"warning"===e.status?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"),children:L.jsxs("div",{className:"flex items-start",children:[L.jsxs("div",{className:"flex-shrink-0 mr-3",children:["success"===e.status&&L.jsx(d,{className:"w-5 h-5 text-green-600"}),"error"===e.status&&L.jsx(m,{className:"w-5 h-5 text-red-600"}),"warning"===e.status&&L.jsx(u,{className:"w-5 h-5 text-yellow-600"}),"info"===e.status&&L.jsx(u,{className:"w-5 h-5 text-blue-600"})]}),L.jsx("div",{className:"flex-1",children:L.jsxs("div",{className:"flex justify-between items-start",children:[L.jsxs("div",{children:[L.jsx("p",{className:"font-medium text-gray-900",children:e.process}),L.jsx("p",{className:"text-gray-700",children:e.message})]}),L.jsx("span",{className:"text-xs text-gray-500 ml-4",children:e.timestamp})]})})]})},e.id))})]})});default:return null}})()}),L.jsx("footer",{className:"bg-white border-t mt-12",children:L.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:L.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[L.jsx("p",{children:"© 2024 Interface de Gestión para Vigencias - Sistema de Gestión Integrado"}),L.jsxs("p",{children:["Versión 1.0.0 - ",t?"Desktop":"Web"]})]})})})]})};F(document.getElementById("root")).render(L.jsx(a.StrictMode,{children:L.jsx(_,{})}));
